<!DOCTYPE html>
<head>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<style>
		body {
			background: url("../background.jpg");
		}
		#header {
			margin-top: 2%;
		}
		.bottomMargin {
			margin-bottom:1em;
		}
		#content {
			padding:0;
		}
	</style>
	<script>
	$(document).ready(function(){
		$.ajax("getUserProfileInfo.php")
			.done(function(data) {
					var userData = JSON.parse(data);
					$("#name").val(userData.name);
					$("#phone").val(userData.phone);
					$("#email").val(userData.email);
				}
			)
	});

	function validateForm() {
		var message = "";
		var u = document.forms["profileForm"]["user"].value;
		if(u == null || u == "") {
			message += "<br>Name must be filled out.";
		}
		var p = document.forms["profileForm"]["phone"].value;
		if(p == null || p == "") {
			message += "<br>Phone number must be filled out.";
		}
		//var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
		//if(!p.value.match(phoneno)) {
		//	message += "<br>Please enter a valid phone number.";
		//}
		var e = document.forms["profileForm"]["email"].value;
		if(e == null || e == "") {
			message += "<br>Email must be filled out.";
		}
		document.getElementById("error").innerHTML = message;
		if(message == "") {
			$.ajax({
				type:"POST",
				url:"./updateUser.php",
				data:{name:$("#name").val(),email:$("#email").val(),phone:$("#phone").val()}
			}).done(function(data) {
				window.location.href = "./userProfile.html";
			});
		}	
	}
	
	function submitUpdate() {
		$.ajax({
				type:"POST",
				url:"./updateUser.php",
				data:{name:$("#name").val(),email:$("#email").val(),phone:$("#phone").val()}
			}).done(function(data) {
				window.location.href = "./userProfile.html";
			});
		
	}
	</script>
</head>
<body>
	<div id = "header">
		<div class="row">
				<img id="logo" class ="bottomMargin col-xs-10 col-sm-2 col-xs-offset-1" src="logo.png"/>
		</div>
		<nav class="navbar navbar-default col-xs-10 col-xs-offset-1" >
			<div class="nav navbar-nav">
				<ul class="nav navbar-nav">
					<li><a id="home" href="home.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></a></li>
					<li><a id="currentProject" href="#">Project A</a></li>
					<li class="active"><a id="messages" href="messages.html">Message Board</a></li>
					<li><a id="schedule" href="schedules.html">Schedules</a></li>
					<li><a id="tasks" href="tasks.html">Tasks</a></li>
					<li><a id="groupMembers" href="groupMembers.html">Group Members</a></li>
					<li><a id="user" href="userProfile.html" href="#">User Name</a></li>
				</ul>	
			</div>
		</nav>
	</div>
	
	<div id="content" class=" col-xs-10 col-xs-offset-1">
		<div class="panel panel-default">
			<div id="contentBody" class="panel-body">
				<div>
				<form name="profileForm" onsubmit="submitUpdate()" method="post">
					Name: <br>
					<input type="text" name="name" id="name"><br>
					Phone Number: <br>
					<input type="text" name="phone" id="phone"><br>
					Email: <br>
					<input type="text" name="email" id="email"><br>
					<input type="submit" value="Submit">
					<p id="error"></p>
				</form>
				</div>
			</div>
		</div>
	</div>
	
</body>