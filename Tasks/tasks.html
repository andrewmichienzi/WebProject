<!DOCTYPE html>
<head>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<!-- Site-wide css -->
	<link rel="stylesheet" href="default.css">
	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script>
		function createTask()
		{
			$.ajax({
    				type: "POST",
    				data: {functionId: 0},
    				url: 'sqlTasks.php'
	
	    			}).done(function (data) {
	                		if(data == "failure") {
						alert("Failure");
	                		}
	               			else {
					//	alert("Success!");
						$("#taskList").append(data);
					}
	       			}
			);
		//alert("Hello");
		}
		function addGroups()
		{
			$.ajax({
    				type: "POST",
    				data: {functionId: 1},
    				url: 'sqlTasks.php'
	
	    			}).done(function (data) {
	                		if(data == "failure") {
						alert("Failure");
	                		}
	               			else {
					//	alert("Success!");
						$("#groupNames").append(data);
					//alert(data);	
					}
	       			}
			);
		}	
	
		function addTask()
		{
			var taskName = document.getElementById("taskName");
			if(taskName.value == "")
				return;
			var taskDescription = document.getElementById("taskDescription");
			var groupId = document.getElementById("groupId");
		
			$.ajax({
    				type: "POST",
    				data: {functionId: 2, taskName: taskName.value, taskDescription: taskDescription.value, groupId: groupId.value},
    				url: 'sqlTasks.php'
	
	    			}).done(function (data) {
	                		if(data == "failure") {
						alert("Failure");
	                		}
	               			else {
						alert("Success!");
//						createTask();
					}
	       			}
			);
		}
	
		function test()
		{
			$.ajax({
    				type: "POST",
    				url: '../sqlDataMaster.php',
    				dataType: 'json',
    				data: {functionname: 'Test'},
	
	    			success: function (obj, textstatus) {
	                		if( !('error' in obj) ) {
						alert("Success");
	                		}
	               			else {
						alert("error");
	      					console.log(obj.error);
	                		}
	       			}
			});

		}

		function getAll(table)
		{
			//Select * from {table}
			var ajaxRequest;
			ajaxRequest = new XMLHttpRequest();
			ajaxRequest.onreadystatechange=function(){
				if(ajaxRequest.readyState == 4)
					return ajaxRequest.responseText;
			}
			
		}
	</script>
</head>
<body>
	<div id = "header">
		<div class="row">
				<img id="logo" class ="bottomMargin col-xs-10 col-sm-2 col-xs-offset-1" src="logo.png"/>
		</div>
		<nav class="navbar navbar-default col-xs-10 col-xs-offset-1" >
			<div class="nav navbar-nav">
				<ul class="nav navbar-nav">
					<li><a id="home" href="home.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></a></li>
					<li><a id="currentProject" href="#">Project A</a></li>
					<li><a id="messages" href="messages.html">Message Board</a></li>
					<li><a id="schedule" href="schedules.html">Schedules</a></li>
					<li class="active"><a id="tasks" href="tasks.html">Tasks</a></li>
					<li><a id="groupMembers" href="groupMembers.html">Group Members</a></li>
					<li><a id="user" href="userProfile.html" href="#">User Name</a></li>
				</ul>	
			</div>
		</nav>
	</div>
	
	<div id="content" class=" col-xs-10 col-xs-offset-1">
		<div class="panel panel-default">
			<div id="contentBody" class="panel-body">
				Panel content
		<!-- Sort By Box -->
				<div id="sortBy">
				<form action="sortBy.asp">
					Sort By: <input type="text" name="sortBy">
					<input type="submit" value="Sort">
				</form>
				</div>
		<!-- Tasks -->
				<div id="taskList">
				</div>
		<!-- Add Task -->
				<div id="addTask();">
				<form action="" onsubmit="addTask()">
					Task: <input type="text" name="taskName" id="taskName"><br>
					Description: <input type="text" name="taskDescription" id="taskDescription"><br>
					Group: <div id="groupNames"></div><br>
					<input type="submit" value="Add Task">
				</form>
				</div>	
			</div>
		</div>
	</div>
	<script>
		createTask();
		addGroups();
	</script>
</body>
